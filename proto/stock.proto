syntax = "proto3";

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";


package stock.v1;

option go_package = "/stock;stock";

service StockService {
  rpc GetAvailability(GetAvailabilityRequest) returns (GetAvailabilityResponse);
  rpc Release(ReleaseRequest) returns (google.protobuf.Empty);
  rpc Confirm(ConfirmRequest) returns (google.protobuf.Empty);
  rpc Reserve(ReserveRequest) returns (ReserveResponse);
}

message ItemsQuantity {
  string id = 1;
  int32 quantity = 2;
}


message GetAvailabilityRequest {
  string lot_id = 1;
  google.protobuf.Timestamp from = 2;
  google.protobuf.Timestamp to = 3;
}

message GetAvailabilityResponse {
  bool available = 1;
}

message ReleaseRequest {
  string reservation_id = 1;
}

message ConfirmRequest {
  string reservation_id = 1;
}

message ReserveRequest {
  string lot_id = 1;
  string order_id = 2;
  google.protobuf.Timestamp from = 3;
  google.protobuf.Timestamp to = 4;
  int32 count = 5;
}

message ReserveResponse {
  string reservation_id = 1;
  google.protobuf.Timestamp expires_at = 2;
}
